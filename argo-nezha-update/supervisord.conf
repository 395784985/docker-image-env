[supervisord]
nodaemon=true

[program:nginx]
command=/usr/sbin/nginx -g 'daemon off;'
autostart=true
autorestart=true
startsecs=5
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:cloudflared]
command=sh -c 'cloudflared tunnel --no-autoupdate run --token "%(ENV_CF_TUNNEL_TOKEN)s"'
autostart=true
autorestart=true
startsecs=5
environment=CF_TUNNEL_TOKEN="%(ENV_CF_TUNNEL_TOKEN)s"

[program:nezha]
command=/dashboard/nezha-dashboard
directory=/dashboard
autostart=true
autorestart=true
startsecs=5
stdout_logfile=/var/log/nezha/dashboard.log
stderr_logfile=/var/log/nezha/dashboard.error.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=10
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=10
